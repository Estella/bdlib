# $Id$

SHELL = @SHELL@
top_srcdir = @top_srcdir@
srcdir = @srcdir@
libdir = $(top_srcdir)/lib
VPATH = @srcdir@
CCDEPMODE = @CCDEPMODE@

@SET_MAKE@

CXX = @CXX@
LD = @CXX@
STRIP = @STRIP@
CXXFLAGS = @CXXFLAGS@ -I. -I$(top_srcdir) -I$(top_srcdir)/build -I$(top_srcdir)/src -I$(libdir)/openssl @DEFS@ $(CFLGS)

include $(top_srcdir)/build/build.mk

OBJS = String.o \
	Cstrings.o

.PHONY: default clean distclean bdlib test build_msg $(BDLIB)

default:
	@echo ""
	@echo "Let's try this from the right directory..."
	@echo ""
	@cd ../.. && $(MAKE)

clean:
	@rm -f .depend *.o *~
	@rm -f *_test test/*.o
	@rm -f $(BDLIB)
	-+@cd tests && $(MAKE) clean

distclean: clean
	@rm -rf .deps Makefile
	-+@cd tests && $(MAKE) distclean

bdlib: $(BDLIB)


$(BDLIB): build_msg $(OBJS)
	ar rcs $@ $(OBJS)
#	@$(LD) -o $@ $(OBJS)

build_msg:
	@echo "[*] Building bdlib"

include ./.deps/includes
